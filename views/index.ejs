<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/css/style.css" />
    <!-- css added -->
    <script defer src="/js/app.js"></script>
  </head>

  <body>
    <!-- header part -->
    <header class="bg-primary">
      <div class="container d-flex justify-content-end">
        <a href="/logout" class="btn btn-light mt-1">Logout</a>
      </div>
    </header>
    <!-- task part(form) -->
    <div class="container">
      <h3 class="text-center title">Add Your Task</h3>
      <form id="form" action="/addtask" method="post" enctype="application/x-www-form-urlencoded" class="mt-5">
        <div class="d-flex gap-2 justify-content-center">
          <div class="mb-3">
            <label for="taskname" class="form-label">Task Name</label>
            <input type="text" class="form-control" id="taskname" aria-describedby="taskHelp" name="taskname" />
          </div>
          <div class="mb-3">
            <label for="selectedItem" class="form-label">Priority</label>
            <select class="form-select" aria-label="Default select example" id="selectedItem" name="priority">
              <option disabled selected>Priority</option>
              <option value="high">High</option>
              <option value="medium">Medium</option>
              <option value="low">Low</option>
            </select>
          </div>
          <div class="mb-3">
            <label for="date" class="form-label">Date</label>
            <input type="date" class="form-control" id="date" aria-describedby="dateHelp" name="date" />
          </div>
          <div class="mb-3">
            <!-- <label for="add" class="form-label">Add Task</label> -->
            <!-- <input type="submit" class="form-control btn btn-primary" id="add" value="Add" /> -->
            <button class="form-control btn btn-primary " id="add">ADD</button>
          </div>
        </div>
      </form>
    </div>

    <!-- task details part (table) -->
    <div class="container mt-5">
      <h3 class="text-center title mb-3">Your Task List</h3>
      <table class="table">
        <% if(tasks.length ){ %>
        <thead>
          <tr>
            <th scope="col">Sl</th>
            <th scope="col">Task Name</th>
            <th scope="col">Priority</th>
            <th scope="col">Status</th>
            <th scope="col">Date</th>
            <th scope="col">Action</th>
          </tr>
        </thead>
        <% } %>
        <tbody>

          <% if(tasks.length){ %>
          <% tasks.forEach((task, index)=>{ %>
          <tr id="<%=task._id  %>">
            <td><%= index+=1  %> </td>
            <td class="taskname"><%=task.taskname %> </td>
            <td class="priority"><%=task.priority %></td>
            <td><%=task.status %></td>
            <td class="date"><%=task.date.toDateString() %></td>
            <td>
              <button id="edit" data-id="<%=task._id%>" class="btn btn-warning">Edit</button>
              <a href="/deleteTask/<%=task._id%>" class="btn btn-danger">Delete</a>
              <a href="/changeStatus/<%=task._id%>" class="btn btn-secondary">Change Status</a>
            </td>
          </tr>
          <% }) %>
          <% }else{ %>
          <p class="text-center text-warning">You didn't add any task</p>
          <% } %>

        </tbody>
      </table>
    </div>
  </body>

</html>


<!-- <tr>
  <td>1</td>
  <td>Exploring Mongoose</td>
  <td>High</td>
  <td>Pending</td>
  <td>12/6/2022</td>
  <td>
    <button class="btn btn-warning">Edit</button>
    <button class="btn btn-danger">Delete</button>
  </td>
</tr> -->